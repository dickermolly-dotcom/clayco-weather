<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Park City Weather â€” Clayco Ski Trip 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600;700;800;900&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --navy:     #0E1E3D;
    --navy-mid: #162847;
    --navy-dk:  #091220;
    --red:      #CC2222;
    --teal:     #5BC4D8;
    --teal-glow:rgba(91,196,216,0.15);
    --white:    #FFFFFF;
    --text-lt:  #C5D0E0;
    --text-dim: #7A8FA8;
    --border:   rgba(91,196,216,0.15);
  }

  html, body {
    height: 100%;
    background: var(--navy-dk);
    font-family: 'Barlow', sans-serif;
    color: var(--white);
  }

  .page {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 24px 16px;
    gap: 0;
  }

  /* â”€â”€ Card â”€â”€ */
  .card {
    width: 100%;
    max-width: 780px;
    background: var(--navy-mid);
    border-radius: 6px;
    overflow: hidden;
    box-shadow:
      0 32px 80px rgba(0,0,0,0.6),
      0 0 0 1px var(--border),
      0 0 40px rgba(91,196,216,0.04);
    animation: rise 0.7s cubic-bezier(0.22,1,0.36,1) both;
  }
  @keyframes rise {
    from { opacity:0; transform:translateY(20px); }
    to   { opacity:1; transform:translateY(0); }
  }

  /* â”€â”€ Top bars â”€â”€ */
  .bar-red  { height: 6px; background: var(--red); }
  .bar-teal { height: 3px; background: var(--teal); }

  /* â”€â”€ Header â”€â”€ */
  .header {
    padding: 16px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--border);
  }
  .eyebrow {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.2em;
    color: var(--teal);
    text-transform: uppercase;
  }
  .live-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.15em;
    color: var(--text-dim);
    text-transform: uppercase;
  }
  .live-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--teal);
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50%       { opacity: 0.4; transform: scale(0.8); }
  }

  /* â”€â”€ 4-day forecast strip â”€â”€ */
  .forecast-strip {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    border-bottom: 1px solid var(--border);
  }

  .day-card {
    padding: 16px 12px 14px;
    text-align: center;
    border-right: 1px solid var(--border);
    position: relative;
    transition: background 0.2s;
  }
  .day-card:last-child { border-right: none; }
  .day-card:hover { background: rgba(91,196,216,0.04); }

  .day-card.loading { opacity: 0.4; }

  .day-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.14em;
    color: var(--teal);
    text-transform: uppercase;
    margin-bottom: 2px;
  }
  .day-date {
    font-size: 10px;
    color: var(--text-dim);
    margin-bottom: 10px;
  }
  .day-icon {
    font-size: 28px;
    margin-bottom: 8px;
    display: block;
    filter: drop-shadow(0 0 6px rgba(91,196,216,0.3));
  }
  .day-temps {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 6px;
    margin-bottom: 6px;
  }
  .temp-hi {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 22px;
    font-weight: 800;
    color: var(--white);
    line-height: 1;
  }
  .temp-lo {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 15px;
    font-weight: 600;
    color: var(--text-dim);
    line-height: 1;
  }
  .day-desc {
    font-size: 9.5px;
    color: var(--text-dim);
    line-height: 1.3;
  }
  .snow-chance {
    margin-top: 6px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.1em;
    color: var(--teal);
    text-transform: uppercase;
    opacity: 0.8;
  }

  /* Teal top accent on first day (today) */
  .day-card:first-child::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: var(--teal);
  }

  /* â”€â”€ Windy map â”€â”€ */
  .map-wrap {
    position: relative;
    width: 100%;
    height: 340px;
    background: var(--navy-dk);
  }
  .map-wrap iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }
  .map-overlay-label {
    position: absolute;
    top: 10px;
    left: 10px;
    background: rgba(10,18,32,0.82);
    border: 1px solid var(--border);
    border-left: 3px solid var(--teal);
    padding: 5px 10px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.14em;
    color: var(--text-lt);
    text-transform: uppercase;
    border-radius: 2px;
    backdrop-filter: blur(4px);
    pointer-events: none;
  }

  /* â”€â”€ Footer â”€â”€ */
  .footer {
    background: var(--navy-dk);
    border-top: 1px solid var(--border);
    padding: 10px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .footer-text {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.16em;
    color: var(--text-dim);
    text-transform: uppercase;
  }
  .footer-flakes {
    font-size: 12px;
    opacity: 0.3;
    letter-spacing: 4px;
  }

  /* â”€â”€ Error state â”€â”€ */
  .forecast-error {
    grid-column: 1/-1;
    padding: 20px;
    text-align: center;
    color: var(--text-dim);
    font-size: 12px;
  }
</style>
</head>
<body>
<div class="page">
  <div class="card">
    <div class="bar-red"></div>
    <div class="bar-teal"></div>

    <div class="header">
      <div class="eyebrow">Park City, Utah &nbsp;Â·&nbsp; Mountain Forecast</div>
      <div class="live-badge"><div class="live-dot"></div> Live Data</div>
    </div>

    <!-- 4-day forecast strip -->
    <div class="forecast-strip" id="forecast">
      <!-- Skeleton loaders -->
      <div class="day-card loading"><div class="day-name">â€”</div><div class="day-icon">â„</div><div class="temp-hi">â€”Â°</div></div>
      <div class="day-card loading"><div class="day-name">â€”</div><div class="day-icon">â„</div><div class="temp-hi">â€”Â°</div></div>
      <div class="day-card loading"><div class="day-name">â€”</div><div class="day-icon">â„</div><div class="temp-hi">â€”Â°</div></div>
      <div class="day-card loading"><div class="day-name">â€”</div><div class="day-icon">â„</div><div class="temp-hi">â€”Â°</div></div>
    </div>

    <!-- Windy map -->
    <div class="map-wrap">
      <iframe
        src="https://embed.windy.com/embed2.html?lat=40.646&lon=-111.498&detailLat=40.646&detailLon=-111.498&width=780&height=340&zoom=9&level=surface&overlay=snowAccu&product=ecmwf&menu=&message=true&marker=true&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=mph&metricTemp=%C2%B0F&radarRange=-1"
        allowfullscreen>
      </iframe>
      <div class="map-overlay-label">â„ Snow Accumulation Â· Park City Resort Area</div>
    </div>

    <div class="footer">
      <span class="footer-text">Clayco Ski Trip 2026 &nbsp;Â·&nbsp; March 5â€“8, 2026</span>
      <span class="footer-flakes">â„ â„ â„</span>
    </div>
  </div>
</div>

<script>
  // Park City, UT coordinates
  const LAT = 40.6461;
  const LON = -111.4980;

  const WMO_ICONS = {
    0:  { icon: 'â˜€ï¸',  desc: 'Clear' },
    1:  { icon: 'ğŸŒ¤',  desc: 'Mostly Clear' },
    2:  { icon: 'â›…',  desc: 'Partly Cloudy' },
    3:  { icon: 'â˜ï¸',  desc: 'Overcast' },
    45: { icon: 'ğŸŒ«',  desc: 'Foggy' },
    48: { icon: 'ğŸŒ«',  desc: 'Icy Fog' },
    51: { icon: 'ğŸŒ¦',  desc: 'Light Drizzle' },
    53: { icon: 'ğŸŒ¦',  desc: 'Drizzle' },
    61: { icon: 'ğŸŒ§',  desc: 'Light Rain' },
    63: { icon: 'ğŸŒ§',  desc: 'Rain' },
    71: { icon: 'ğŸŒ¨',  desc: 'Light Snow' },
    73: { icon: 'â„ï¸',  desc: 'Snow' },
    75: { icon: 'â„ï¸',  desc: 'Heavy Snow' },
    77: { icon: 'ğŸŒ¨',  desc: 'Snow Grains' },
    80: { icon: 'ğŸŒ¦',  desc: 'Rain Showers' },
    85: { icon: 'ğŸŒ¨',  desc: 'Snow Showers' },
    86: { icon: 'â„ï¸',  desc: 'Heavy Snow Showers' },
    95: { icon: 'â›ˆ',  desc: 'Thunderstorm' },
  };

  function getWeatherInfo(code) {
    return WMO_ICONS[code] || { icon: 'ğŸŒ¡', desc: 'Mixed' };
  }

  function getDayName(dateStr, index) {
    if (index === 0) return 'Today';
    const days = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    const d = new Date(dateStr + 'T12:00:00');
    return days[d.getDay()];
  }

  function formatDate(dateStr) {
    const d = new Date(dateStr + 'T12:00:00');
    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
  }

  async function loadForecast() {
    try {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max,snowfall_sum&temperature_unit=fahrenheit&precipitation_unit=inch&timezone=America%2FDenver&forecast_days=4`;
      const res = await fetch(url);
      const data = await res.json();
      const { daily } = data;

      const strip = document.getElementById('forecast');
      strip.innerHTML = '';

      for (let i = 0; i < 4; i++) {
        const code   = daily.weathercode[i];
        const hi     = Math.round(daily.temperature_2m_max[i]);
        const lo     = Math.round(daily.temperature_2m_min[i]);
        const precip = daily.precipitation_probability_max[i] || 0;
        const snow   = daily.snowfall_sum[i] || 0;
        const { icon, desc } = getWeatherInfo(code);
        const dayName = getDayName(daily.time[i], i);
        const dayDate = formatDate(daily.time[i]);

        const snowLine = snow > 0.1
          ? `<div class="snow-chance">â„ ${snow.toFixed(1)}" snow expected</div>`
          : precip > 20
          ? `<div class="snow-chance">ğŸ’§ ${precip}% precip chance</div>`
          : `<div class="snow-chance" style="opacity:0.3">No precipitation</div>`;

        strip.innerHTML += `
          <div class="day-card">
            <div class="day-name">${dayName}</div>
            <div class="day-date">${dayDate}</div>
            <span class="day-icon">${icon}</span>
            <div class="day-temps">
              <span class="temp-hi">${hi}Â°</span>
              <span class="temp-lo">${lo}Â°</span>
            </div>
            <div class="day-desc">${desc}</div>
            ${snowLine}
          </div>`;
      }
    } catch(e) {
      document.getElementById('forecast').innerHTML =
        '<div class="forecast-error">Unable to load forecast. Check your connection.</div>';
    }
  }

  loadForecast();
</script>
</body>
</html>
